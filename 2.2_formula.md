### 一、指标编写

```
{
	板块-多投
	有游资参与	
}
BK1 := (STR2CON(CODE)>880300 AND STR2CON(CODE)<880400);
BK2 := (STR2CON(CODE)>880500 AND STR2CON(CODE)<=880800);
BK3 := (STR2CON(CODE)>=880899 AND STR2CON(CODE)<=880999);
BK := BK1 OR BK2 OR BK3;
DT := MA(C,5)>MA(C,13) AND MA(C,13)>MA(C,21) AND MA(C,21)>MA(C,34);
XG := BK AND DT AND COUNT(DYNAINFO(23)>=10, 5);
ZZ :=REF(XG,RF);
OK :DRAWICON(ZZ,REF(C,RF),1);

{
	板块-回踩
	有游资参与
}
BK1 := (STR2CON(CODE)>880300 AND STR2CON(CODE)<880400);
BK2 := (STR2CON(CODE)>880500 AND STR2CON(CODE)<=880800);
BK3 := (STR2CON(CODE)>=880899 AND STR2CON(CODE)<=880999);
BK := BK1 OR BK2 OR BK3;
DT := MA(C,5)>MA(C,13) AND MA(C,13)>MA(C,21) AND MA(C,21)>MA(C,34);
XG := BK AND DT AND COUNT(DYNAINFO(23)>=10, 5) AND L<MA(C,13);
ZZ :=REF(XG,RF);
OK :DRAWICON(ZZ,REF(C,RF),1);

{
	板块-多投
	无游资参与	
}
BK1 := (STR2CON(CODE)>880300 AND STR2CON(CODE)<880400);
BK2 := (STR2CON(CODE)>880500 AND STR2CON(CODE)<=880800);
BK3 := (STR2CON(CODE)>=880899 AND STR2CON(CODE)<=880999);
BK := BK1 OR BK2 OR BK3;
DT := MA(C,5)>MA(C,13) AND MA(C,13)>MA(C,21) AND MA(C,21)>MA(C,34);
XG := BK AND DT;
ZZ :=REF(XG,RF);
OK :DRAWICON(ZZ,REF(C,RF),1);

{
	板块-回踩
	无游资参与
}
BK1 := (STR2CON(CODE)>880300 AND STR2CON(CODE)<880400);
BK2 := (STR2CON(CODE)>880500 AND STR2CON(CODE)<=880800);
BK3 := (STR2CON(CODE)>=880899 AND STR2CON(CODE)<=880999);
BK := BK1 OR BK2 OR BK3;
DT := MA(C,5)>MA(C,13) AND MA(C,13)>MA(C,21) AND MA(C,21)>MA(C,34);
XG := BK AND DT AND L<MA(C,13);
ZZ :=REF(XG,RF);
OK :DRAWICON(ZZ,REF(C,RF),1);

{
	抄底_背离_01
	中通客车
	竞业达
}
DIF:= 10*"MACD.DIF"(10,20,7) ;
DEA:= 10*"MACD.DEA"(10,20,7) ;
MYMACD:= 10*"MACD.MACD"(10,20,7) ;
CF:=IF(CODELIKE('300'),0,1) AND IF(CODELIKE('301'),0,1) AND IF(CODELIKE('688'),0,1);
AA:=H/REF(C,1)>1.097;
BB:=BARSLAST(AA AND V/REF(MA(V,5),1)>4 AND COUNT(AA,40)<2);
MP:=REF(MAX(O,C),BB);
BP:=REF(MIN(O,C),BB);
CC:=BARSLAST(CROSS(DIF,DEA));
DD:=REF(CC,1)+1;
EE:=BARSLAST(CROSS(DIF,DEA) AND DIF>REF(DIF,DD) AND C<REF(C,DD));
FF:=REF(EE,1)+1;
GG:=BARSLAST(BB<50 AND FF<50 AND CROSS(DIF,DEA) AND  EVERY(O<MP AND C<MP,BB))<3;
HH:=REF(CF AND GG,RF);
OK:DRAWICON(HH,REF(C,RF),1);

{
	抄底_01
	中通客车
	竞业达
	V>5
}
DIF:= 10*"MACD.DIF"(10,20,7) ;
DEA:= 10*"MACD.DEA"(10,20,7) ;
MYMACD:= 10*"MACD.MACD"(10,20,7) ;
CF:=IF(CODELIKE('300'),0,1) AND IF(CODELIKE('301'),0,1) AND IF(CODELIKE('688'),0,1);
AA:=H/REF(C,1)>1.097;
BB:=BARSLAST(AA AND V/REF(MA(V,5),1)>5 AND COUNT(AA,40)<2);
CC:=BARSLAST(CROSS(DIF,DEA));
MP:=REF(MAX(O,C),BB);
BP:=REF(MIN(O,C),BB);
DD:=BB<60 AND BB>CC AND CC<3 AND EVERY(O<MP AND C<MP,BB) AND MYMACD>0 AND C<BP;
EE:=REF(CF AND DD,RF);
OK:DRAWICON(EE,REF(C,RF),1);

{
	抄底_02
	中通客车
	竞业达
}
DIF:= 10*"MACD.DIF"(10,20,7) ;
DEA:= 10*"MACD.DEA"(10,20,7) ;
MYMACD:=1000*"MACD.MACD"(10,20,7) ;
CF:=IF(CODELIKE('300'),0,1) AND IF(CODELIKE('301'),0,1) AND IF(CODELIKE('688'),0,1);
AA:=H/REF(C,1)>1.097;
BB:=BARSLAST(AA AND COUNT(AA,40)<2);
CC:=BARSLAST(CROSS(DIF,DEA));
MP:=REF(MAX(O,C),BB);
BP:=REF(MIN(O,C),BB);
DD:=BB<60 AND BB>CC AND CC<3 AND EVERY(O<MP AND C<MP,BB) AND MYMACD>=0 AND C<BP;
EE:=REF(CF AND DD,RF);
OK:DRAWICON(EE,REF(C,RF),1);

{
	背离_01
}
AA:=IF(CODELIKE('300'),0,1) AND IF(CODELIKE('301'),0,1) AND IF(CODELIKE('688'),0,1);
DIF:="MACD.DIF"(10,20,7) ;
DEA:="MACD.DEA"(10,20,7) ;
BB:=BARSLAST(CROSS(DIF,DEA));
CC:=REF(BB,1)+1;
DD:=REF(CROSS(DIF,DEA) AND DIF>REF(DIF,CC) AND C<REF(C,CC),RF);
OK:DRAWICON(AA AND DD,REF(C,RF),1);

{
	背离_02
	做T
}
CF:=IF(CODELIKE('300'),0,1) AND IF(CODELIKE('301'),0,1) AND IF(CODELIKE('688'),0,1);
DIF:="MACD.DIF"(10,20,7);
DEA:="MACD.DEA"(10,20,7);
AA:=BARSLAST(CROSS(DIF,DEA));
BB:=REF(AA,1)+1;
CC:=BARSLAST(CROSS(DIF,DEA) AND DIF>REF(DIF,BB) AND C<REF(C,BB));
DD:=BB<30 AND CC<30 AND REF(O,1)<REF(MIN(O,C),2) AND REF(C,1)<REF(MAX(O,C),2) AND C>MAX(REF(MIN(O,C),2),REF(MAX(O,C),1));
EE:=REF(CF AND DD,RF);
OK:DRAWICON(EE,REF(C,RF),1);

{
	背离_03
}
CF:=IF(CODELIKE('300'),0,1) AND IF(CODELIKE('301'),0,1) AND IF(CODELIKE('688'),0,1);
DIF:="MACD.DIF"(10,20,7);
DEA:="MACD.DEA"(10,20,7);
AA:=BARSLAST(CROSS(DIF,DEA));
BB:=REF(AA,1)+1;
CC:=BARSLAST(CROSS(DIF,DEA) AND DIF>REF(DIF,BB) AND C<REF(C,BB));
DD:=CC<30 AND HHV(C,CC)>REF(HHV(C,BB),CC) AND MA(C,60)>REF(MA(C,60),1) AND C>MA(C,60) AND C>=REF(C,CC) AND REF(C,1)<REF(C,CC);
EE:=REF(CF AND DD,RF);
OK:DRAWICON(EE,REF(C,RF),1);

{
	龙回头_01
	汉王科技
	收阴线或者长上引线就卖
}
MACD:=10*"MACD.MACD"(10,20,7);
CF:=IF(CODELIKE('300'),0,1) AND IF(CODELIKE('301'),0,1) AND IF(CODELIKE('688'),0,1);
AA:=H/REF(C,1)>1.097;
BB:=BARSLAST(AA AND COUNT(AA,10)>1);
CC:=BARSLAST(CROSS(MA(C,5),MA(C,10)));
DD:=BARSLAST(CROSS(MA(C,5),MA(C,20)));
EE:=BARSLAST(CROSS(MA(C,10),MA(C,20)));
MP:=REF(MAX(O,C),BB);
FF:=BB<80 AND BB>CC AND CC>=DD AND DD>=EE AND EE<20 AND EVERY(MP>O AND MP>C,BB) AND REF(O,1)<REF(MIN(O,C),2) AND REF(C,1)<REF(MAX(O,C),2) AND C>MAX(REF(MIN(O,C),2),REF(MAX(O,C),1));
GG:=REF(CF AND FF,RF);
OK:DRAWICON(GG,REF(C,RF),1);

{
	龙回头_02
	通润装备
	收阴线或者长上引线就卖
}
MACD:=10*"MACD.MACD"(10,20,7);
CF:=IF(CODELIKE('300'),0,1) AND IF(CODELIKE('301'),0,1) AND IF(CODELIKE('688'),0,1);
AA:=H/REF(C,1)>1.097;
BB:=BARSLAST(AA AND COUNT(AA,10)>1);
CC:=BARSLAST(CROSS(MA(C,5),MA(C,10)));
DD:=BARSLAST(CROSS(MA(C,5),MA(C,20)));
EE:=BARSLAST(CROSS(MA(C,10),MA(C,20)));
MP:=REF(MAX(O,C),BB);
FF:=BB<80 AND BB>CC AND CC>=DD AND DD>=EE AND EE<3 AND EVERY(MP>O AND MP>C,BB) AND MA(C,10)>=MA(C,20) AND L<=MA(C,5) AND C>=MA(C,20) AND MACD>=0;
GG:=REF(CF AND FF,RF);
OK:DRAWICON(GG,REF(C,RF),1);


{
	告警_01
	天鹅股份
	V>5
}
CF:=IF(CODELIKE('300'),0,1) AND IF(CODELIKE('301'),0,1) AND IF(CODELIKE('688'),0,1);
AA:=REF(C,1)/REF(C,2)>1.097;
BB:=BARSLAST(AA AND COUNT(AA,40)<2 AND V/REF(MA(V,5),2));
MP:=REF(MAX(O,C),BB);
BP:=REF(MIN(O,C),BB);
CC:=BB<40 AND EVERY(MP>O AND MP>C,BB) AND C>BP;
DD:=REF(CF AND CC,RF);
OK:DRAWICON(DD,REF(C,RF),1);

{
	告警_02
	天鹅股份
}
CF:=IF(CODELIKE('300'),0,1) AND IF(CODELIKE('301'),0,1) AND IF(CODELIKE('688'),0,1);
AA:=REF(C,1)/REF(C,2)>1.097;
BB:=BARSLAST(AA AND COUNT(AA,40)<2);
MP:=REF(MAX(O,C),BB);
BP:=REF(MIN(O,C),BB);
CC:=BB<40 AND EVERY(MP>O AND MP>C,BB) AND C>BP;
DD:=REF(CF AND CC,RF);
OK:DRAWICON(DD,REF(C,RF),1);

{
  最新
  中通客车
  竞业达
}
CF:=IF(CODELIKE('300'),0,1) AND IF(CODELIKE('301'),0,1) AND IF(CODELIKE('688'),0,1);
DIF:="MACD.DIF"(10,20,7) ;
DEA:="MACD.DEA"(10,20,7) ;
AA:=H/REF(C,1)>1.097 AND C>O;
BB:BARSLAST(AA AND V/REF(MA(V,5),1)>5 AND COUNT(AA,40)<2);
MP:=REF(C,BB);
BP:=REF(LLV(C,30),BB);
CC:=BARSLAST(CROSS(DIF,DEA));
DD:=EVERY(O<MP AND C<MP,BB) AND BB<30 AND BB>CC AND CC<2 AND C<BP;
EE:=REF(CF AND DD,RF);
OK:DRAWICON(EE,REF(C,1),1);
```

### 二、连续四连阳:RF

```
AA:=REF(C,3)>REF(O,3);
BB:=REF(C,2)>REF(C,3) AND REF(V,2)<REF(V,3) AND REF(C,2)>REF(O,2);
CC:=REF(C,1)>REF(C,3) AND REF(V,1)<REF(V,3) AND REF(C,1)>REF(O,1);
DD:=REF(C,0)>REF(C,3) AND REF(V,0)<REF(V,3) AND REF(C,0)>REF(O,0);
EE:=REF(AA AND BB AND CC AND DD,RF);
OK:DRAWICON(EE,C,1);
```

### 三、水上金叉：CT,RF

```
MACD01:=10*"MACD.MACD #DAY"(10,20,7);
DIF01:="MACD.DIF #DAY"(10,20,7);
DEA01:="MACD.DEA #DAY"(10,20,7);
DIF02:=REF(DIF01,RF) ;
DEA02:=REF(DEA01,RF) ;
DIF03:=REF(DIF01,RF+RF);
DEA03:=REF(DEA01,RF+RF);
BB:=CROSS(DIF02,DEA02);
CC:=CROSS(DEA03,DIF03);
DD:=BB AND CC AND DEA02>0 AND DIF01>DEA01 AND DEA01>0;
DRAWICON(DD,H,1);

```

### 四、最近使用的

```
{
	首板	
}
AA:=C/REF(C,1)>1.097 AND REF(C,1)/REF(C,2)<1.097;
BB:=REF(AA,RF);
CC:=IF(CODELIKE('300'),0,1) AND IF(CODELIKE('301'),0,1) AND IF(CODELIKE('688'),0,1);
DD:DRAWICON(BB AND CC,C,1);

{
	背离
}
AA:=IF(CODELIKE('300'),0,1) AND IF(CODELIKE('301'),0,1) AND IF(CODELIKE('688'),0,1);
DIF:="MACD.DIF"(10,20,7) ;
DEA:="MACD.DEA"(10,20,7) ;
BB:=BARSLAST(CROSS(DIF,DEA));
CC:=REF(BB,1)+1;
DD:=CROSS(DIF,DEA) AND DIF>REF(DIF,CC) AND C<REF(C,CC) AND FINANCE(40)>5000000000 AND FINANCE(30)/CAPITAL/FINANCE(34)>3 AND DEA>0;
EE:=REF(AA AND DD,RF);
OK:DRAWICON(EE,REF(C,1),1);

{
	抄底_01
	一个月内满足的
	中通客车
	竞业达
	大于前30天的最高值
}
CF:=IF(CODELIKE('300'),0,1) AND IF(CODELIKE('301'),0,1) AND IF(CODELIKE('688'),0,1);
DIF:="MACD.DIF"(10,20,7) ;
DEA:="MACD.DEA"(10,20,7) ;
AA:=H/REF(C,1)>1.097 AND C>O AND C>REF(HHV(H,30),1);
BB:=BARSLAST(AA AND V/REF(MA(V,5),1)>4 AND COUNT(AA,30)<2);
MP:=REF(HHV(H,30),BB);
BP:=REF(LLV(L,30),BB);
CC:=BB<60 AND EVERY(O<MP AND C<MP,BB) AND C<BP AND CROSS(DIF,DEA);
DD:=BARSLAST(CC)<30;
OK:DRAWICON(CF AND DD,REF(C,1),1);


{
	抄底_02
	一个月内满足的
	中通客车
	竞业达
	要有黄金坑
}
DIF:= 10*"MACD.DIF"(10,20,7) ;
DEA:= 10*"MACD.DEA"(10,20,7) ;
CF:=IF(CODELIKE('300'),0,1) AND IF(CODELIKE('301'),0,1) AND IF(CODELIKE('688'),0,1);
AA:=H/REF(C,1)>1.097;
BB:=BARSLAST(AA AND COUNT(AA,40)<2 AND V>REF(MA(V,5),1) AND C>O);
MP:=REF(C,BB);
BP:=REF(O,BB);
CC:=BB<60 AND EVERY(MP>O AND MP>C,BB) AND CROSS(DIF,DEA) AND C<BP;
DD:=REF(CF AND CC,RF);
OK:DRAWICON(DD,REF(C,RF),1);

{
	龙回头_01
	通润装备
	收阴线或者长上引线就卖
	查找一个月内的
}
CF:=IF(CODELIKE('300'),0,1) AND IF(CODELIKE('301'),0,1) AND IF(CODELIKE('688'),0,1);
DIF:= 10*"MACD.DIF"(10,20,7) ;
DEA:= 10*"MACD.DEA"(10,20,7) ;
AA:=H/REF(C,1)>1.097;
BB:=BARSLAST(AA AND COUNT(AA,5)>1);
CC:=REF(BB,1)+1;
DD:=REF(BARSSINCEN(AA,20),CC);
CP:=REF(MIN(O,C),CC+DD);
EE:=CC<100 AND CP>LLV(L,CC) AND CROSS(DIF,DEA);
FF:=REF(CF AND EE,RF);
OK:DRAWICON(FF,REF(C,1),1);


{
	龙回头_02
	通润装备
	收阴线或者长上引线就卖
}
MACD:=10*"MACD.MACD"(10,20,7);
CF:=IF(CODELIKE('300'),0,1) AND IF(CODELIKE('301'),0,1) AND IF(CODELIKE('688'),0,1);
AA:=H/REF(C,1)>1.097;
BB:=BARSLAST(AA AND COUNT(AA,10)>1);
CC:=BARSLAST(CROSS(MA(C,5),MA(C,10)));
DD:=BARSLAST(CROSS(MA(C,5),MA(C,20)));
EE:=BARSLAST(CROSS(MA(C,10),MA(C,20)));
MP:=REF(MAX(O,C),BB);
FF:=BB<80 AND BB>CC AND CC>=DD AND DD>=EE AND EE<30 AND EVERY(MP>O AND MP>C,BB);
GG:=REF(CF AND FF,RF);
OK:DRAWICON(GG,REF(C,RF),1);

{
	龙回头_03
	三红兵
	通润装备
	收阴线或者长上引线就卖
	查找一个月内的
}
CF:=IF(CODELIKE('300'),0,1) AND IF(CODELIKE('301'),0,1) AND IF(CODELIKE('688'),0,1);
DIF:= 10*"MACD.DIF"(10,20,7) ;
DEA:= 10*"MACD.DEA"(10,20,7) ;
AA:=H/REF(C,1)>1.097;
BB:=BARSLAST(AA AND COUNT(AA,5)>1);
CC:=REF(BB,1)+1;
DD:=REF(BARSSINCEN(AA,20),CC);
CP:=REF(MIN(O,C),CC+DD);
DE:=REF(C,3)<REF(O,3) AND REF(C,2)>REF(O,2) AND REF(C,1)>REF(O,1) AND C>O;
EE:=CC<100 AND CP>LLV(L,CC) AND DE AND COUNT(DE,BB)=1;
FF:=REF(CF AND EE,RF);
OK:DRAWICON(FF,REF(C,1),1);


{
	龙回头_04
	金叉
	华脉科技
	封板当天的>5分钟，成交量就是最高
}
CF:=IF(CODELIKE('300'),0,1) AND IF(CODELIKE('301'),0,1) AND IF(CODELIKE('688'),0,1);
DIF:= 10*"MACD.DIF"(10,20,7) ;
DEA:= 10*"MACD.DEA"(10,20,7) ;
AA:=H/REF(C,1)>1.097;
BB:=BARSLAST(AA AND COUNT(AA,5)>2);
HV:=REF(V,BB);
HP:=REF(H,BB);
CC:=BB<180 AND EVERY(HP>C,BB) AND EVERY(HV>V,BB) AND CROSS(DIF,DEA);
DD:=REF(CF AND CC,RF);
OK:DRAWICON(DD,REF(C,RF),1);


{
	龙回头_最强
	华脉科技
	收阴线或者长上引线就卖
	查找一个月内的
}
CF:=IF(CODELIKE('300'),0,1) AND IF(CODELIKE('301'),0,1) AND IF(CODELIKE('688'),0,1);
DIF:= 10*"MACD.DIF"(10,20,7) ;
DEA:= 10*"MACD.DEA"(10,20,7) ;
AA:=C/REF(C,1)>1.096 AND O=C;
BB:=BARSLAST(AA AND COUNT(AA,5)>1);
CC:=REF(BB,1)+1;
HV:=REF(V,BB);
HP:=REF(H,BB);
DD:=CC<180 AND EVERY(HV>V AND HP>O AND HP>C,CC) AND CROSS(DIF,DEA);
EE:=REF(CF AND DD,RF);
OK:DRAWICON(EE,REF(C,RF),1);



```

